<!DOCTYPE html>

<html lang="he" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>page 7</title>
    <link id="pagestyle" rel="stylesheet" href="css/styles.css" type="text/css" />
    <script src="js/jquery-3.2.1.min.js" charset="utf-8"></script>
    <script src="js/scripts.js" charset="utf-8"></script>
    <script>

        function pickCSS() {
            var pickLang = getParameterByName("lang");
            if (pickLang.localeCompare("heb") === 0 || pickLang.localeCompare("eng") === 0){
               loadCSSLang(pickLang);
            } else {
                url = 'gb1.html?lang=heb';
                window.location.replace(url); 
                loadCSSLang('heb');
            }
        }

     function pickLanguage() {
             var pickLang = getParameterByName("lang");
            if (typeof pickLang !== 'undefined' && pickLang !== null) {
                if (pickLang.localeCompare("heb") === 0) {
                    localStorage.setItem("langID", "eng");
                     url = 'gb1.html?lang=eng';
                     window.location.replace(url);
                    pickCSS();

                } else if (pickLang.localeCompare("eng") === 0) {
                    localStorage.setItem("langID", "heb");
                     url = 'gb1.html?lang=heb';
                     window.location.replace(url);
                    pickCSS();
                  }
            } else {
                localStorage.setItem("langID", "heb");
                  url = 'gb1.html?lang=heb';
                  window.location.replace(url);
                 pickCSS();
            }
        }

     function loadLang() {
           var xmlhttp = new XMLHttpRequest();
           xmlhttp.onreadystatechange = function() {
               if (this.readyState == 4 && this.status == 200) {
                   var myObj = JSON.parse(this.responseText);
                   var pickLang = localStorage.getItem("langID");
                  
                   if (typeof pickLang !== 'undefined' && pickLang !== null) {
                       if (pickLang.localeCompare("heb") === 0) {
                           localStorage.setItem("langID", "heb");
                           $('#lang').css("background-image", "url('cut/Group 128.png')");     
                           changeIcons(0);
                           localStorage.setItem("lang", JSON.stringify(myObj.HE));
                       } else {
                           localStorage.setItem("langID", "eng");
                           $('#lang').css("background-image", "url('cut/Group 312.png')");
                           changeIcons(1);
                           localStorage.setItem("lang", JSON.stringify(myObj.EN));
                       }
                   } else {
                       localStorage.setItem("langID", "heb");
                       localStorage.setItem("lang", JSON.stringify(myObj.HE));
                   }
                   loadData();
               }
           };
          xmlhttp.open("GET", "js/lang.json", true);
          xmlhttp.send();       
        }

        function loadData() {
            JsonLang = localStorage.getItem("lang");
            var lang = JSON.parse(JsonLang);
            $('#hdTitle').text(lang["hdTitles"]["groundbreaking"]);
            $('#catgTitle').text(lang.catgTitle);
         
        }

        function clickedItm(idNum) {
            JsonLang = localStorage.getItem("lang");
            var rfid = getParameterByName("rfid");
            var lang = JSON.parse(JsonLang);
            var langIs=localStorage.getItem("langID");
            var currId = idNum;
            var currSec = lang.page7.catg;
            var subCat = "";
            if (currId.localeCompare("edu") === 0) {
                subCat = currSec.edu;
                sessionStorage.setItem('sub', "edu");
                location.href = "gb2.html?cat=edu" + '&lang=' + langIs+ '&rfid=' + rfid + "";
                        
            } else if (currId.localeCompare("work") === 0) {
                subCat = currSec.work;
                sessionStorage.setItem('sub',"work");
                   location.href = "gb2.html?cat=work" + '&lang=' + langIs+ '&rfid=' + rfid + "";
                        
            } else if (currId.localeCompare("politic") === 0) {
                subCat = currSec.politic;
                sessionStorage.setItem('sub', "politic");
                location.href = "gb2.html?cat=politic" + '&lang=' + langIs+ '&rfid=' + rfid + "";
            }
        }

        $(function () {
            pickCSS();      
            $('#edu, #work, #politic').click(function () {
                var x = this.id;
                clickedItm(x);
            });
        });


    </script>

</head>
<body>
    <div class="header">
        <div class="headerWrapper">
            <div class="headerCont">
                <div class="langIcon" id="lang" onclick="pickLanguage()"></div>
                <div class="titleCont"><div class="mainTitle" id="hdTitle">פורצות דרך</div></div>
                <div class="homeIcon" onclick="goHomePg()"></div>
            </div>
        </div>
        <div class="borderBtm"></div>
    </div>
    <div class="pageCont" id="gb1">
        <div class="pageWrapper">
            <div class="category">
                <span class="categoryTitle" id="catgTitle">קטגוריות</span>
            </div>
            <div class="pageSubCont">
                <div class="pageSubWrapper">
                    <div class="categoryCont">
                        <div class="categoryWrap">
                            <span class="edu" id="edu"></span>
                            <span class="career" id="work"></span>
                            <span class="politics" id="politic"></span>
                         </div>
                      </div>
                    </div>
                </div>
            </div>
      </div>
</body>
</html>