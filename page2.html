<!DOCTYPE html>

<html lang="he" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>page 2</title>
    <link rel="stylesheet" href="css/styles.css" type="text/css" />
    <script src="js/jquery-3.2.1.min.js" charset="utf-8"></script>
    <script src="js/scripts.js" charset="utf-8"></script>
    <script>
        var pickLang = "";
        var currLang = "";
          function loadLang() {
           var xmlhttp = new XMLHttpRequest();
           xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var myObj = JSON.parse(this.responseText);
                console.log(myObj);
              if (pickLang.localeCompare("") === 0 || pickLang.localeCompare(" ") === 0) {
                  localStorage.setItem("lang", JSON.stringify(myObj.HE));
            } else {
                  localStorage.setItem("lang", JSON.stringify(myObj.EN));
                }
                loadCountry();
             }
           };
          xmlhttp.open("GET", "js/lang.json", true);
          xmlhttp.send();     
        }
         function addToColumn() {
            var c1 = document.getElementById("col1").childElementCount;
            var c2 = document.getElementById("col2").childElementCount;
            if (c1 > c2) {
                return 'col2';
            } else {
                return 'col1';
            }
        }

        function loadCountry() {
            JsonLang = localStorage.getItem("lang");
            var lang = JSON.parse(JsonLang);
            console.log(lang);
            var object = lang["country"];
            console.log(object);
            counter = 0;
            for (var i in object) {
                    counter++;
                    var col = addToColumn();
                    console.log(col);
                    console.log(object[i].name);
                    var elem = '<span id=' + 'itm' + counter + ' class="colItem" data=' + object[i].id + ' >' + object[i].name +  '</span>';
                    document.getElementById(col).innerHTML += elem;
                
            }
        }

        function goTo() {
            location.href = "page1.html";
        }

        $(function () {
            loadLang();
            console.log("before Clicked");
         
             $('body').delegate('.colItem', 'click', function () {
                console.log("Clicked");
                var prData = "" + $(this).attr("data");
                var subCatg = $(this).text();
                val = parseInt(prData, 10);
               console.log(prData);
               console.log(name);
                var my_object = { "sub": subCatg, "prData": val }
                localStorage.setItem('my_item', JSON.stringify(my_object));
                location.href = "page1.html";
            });
        });

    </script>
</head>

<body>
    <div class="header">
        <div class="headerWrapper">
            <div class="headerCont">
                <div class="langIcon" id="lang"></div>
                <div class="titleCont"><div class="mainTitle" id="hdTitle">מסע בין קהילות</div></div>
                <div class="homeIcon" onclick="goHomePg()"></div>
            </div>
        </div>
        <div class="borderBtm"></div>
    </div>
    <div class="pageCont">
        <div class="pageWrapper">
            <div class="category">
                <span class="greenTitle" id="catgMain"> שאר הקהילות</span>
                <span class="split invisible">&ensp;/&ensp;</span>
                <span class="subCat" id="catgSub1"></span>
            </div>

            <div class="pageSubCont">
                <div class="pageSubWrapper">
                    <div class="searchCont"><input name="search" id="search" type="text" class="searchSec" placeholder="חפשו קהילה" /></div>
                    <div class="table">
                        <div class="fstCol">
                            <div class="columnCont" id="col1">
               
                            </div>
                        </div>
                        <div class="splitLine"></div>
                        <div class="sndCol">
                            <div class="columnCont" id="col2">
                            
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
</body>
</html>