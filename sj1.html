<!DOCTYPE html>

<html lang="he" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>page 14</title>
    <link id="pagestyle" rel="stylesheet" href="css/styles.css" type="text/css" />
    <script src="js/jquery-3.2.1.min.js" charset="utf-8"></script>
    <script src="js/scripts.js" charset="utf-8"></script>

    <script>
        function goHomePg() {
            location.href = 'sj1.html';
        }

        function pickCSS() {
            var pickLang = localStorage.getItem("langID");
            if (typeof pickLang !== 'undefined' && pickLang !== null) {
                if (pickLang.localeCompare("he") === 0) {
                    swapStyleSheet('css/styles.css');
                    localStorage.setItem("langID", "he");
                    loadLang();
                } else if (pickLang.localeCompare("en") === 0) {
                    localStorage.setItem("langID", "en");
                    swapStyleSheet('css/styles-eng.css');
                    loadLang();
                }
            } else {
                localStorage.setItem("langID", "he");
                swapStyleSheet('css/styles.css');
                loadLang();
            }
        }

        function pickLanguage() {
            var pickLang = localStorage.getItem("langID");
            if (typeof pickLang !== 'undefined' && pickLang !== null) {
                if (pickLang.localeCompare("he") === 0) {
                    localStorage.setItem("langID", "en");
                    pickCSS();

                } else if (pickLang.localeCompare("en") === 0) {
                    localStorage.setItem("langID", "he");
                    pickCSS();
                }
            } else {
                localStorage.setItem("langID", "he");
                pickCSS();
            }
        }

        function loadLang() {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    var myObj = JSON.parse(this.responseText);
                    var pickLang = localStorage.getItem("langID");
                    if (typeof pickLang !== 'undefined' && pickLang !== null) {
                        if (pickLang.localeCompare("he") === 0) {
                            localStorage.setItem("langID", "he");
                            $('#lang').css("background-image", "url('../cut/Group 128.png')");
                            localStorage.setItem("lang", JSON.stringify(myObj.HE));
                        } else {
                            localStorage.setItem("langID", "en");
                            $('#lang').css("background-image", "url('../cut/Group 128 - eng.png')");
                            localStorage.setItem("lang", JSON.stringify(myObj.EN));
                        }
                    } else {
                        localStorage.setItem("langID", "he");
                        localStorage.setItem("lang", JSON.stringify(myObj.HE));
                    }
                    loadData();
                }
            };
            xmlhttp.open("GET", "js/lang.json", true);
            xmlhttp.send();

        }


        function loadData() {
            JsonLang = localStorage.getItem("lang");
            var lang = JSON.parse(JsonLang);
            $('#hdTitle').text(lang["hdTitles"]["starsJour"]);
            $('#catgTitle').text(lang.catgTitle);
            var categ = lang["categories"];
            counter = 0;
            for (var i in categ) {
                subCount = 0;
                counter++;
                currId = 'c' + counter;
                $('#' + currId).empty();
                var cache = $('#' + currId).children();
                $('#' + currId).text(categ[i].title).append(cache);
                var sub = categ[i].subCat;
                for (j in sub) {
                    subCount++;
                    var elem = '<div id=' + 's' + subCount + '  class="subCat">' + sub[j] + '</div>';
                    document.getElementById(currId).innerHTML += elem;
                }
            }
        }

        $(function () {
            pickCSS();
            $('body').delegate('.catgItem', 'click', function () {
                var idItm = this.id;
                var value = $('#' + idItm)[0].childNodes[0].nodeValue;
                $('#catgTitle').addClass('mainCat');
                $('#catgMain').removeClass('greenTitle');
                $('#split').removeClass('invisible');
                $('#catgSub1').html(value);
                event.stopPropagation();
                $('#' + idItm).children('.subCat').toggle();
            });

            $('body').delegate('.subCat', 'click', function () {
                var idItm = (this).id;
                var idPr = $(this).parent().attr('id');
                localStorage.setItem("main", idPr);
                localStorage.setItem("sub", idItm);
                location.href = "sj2.html";
            });
              $('body').delegate('.singleCat', 'click', function () {
                var idItm = "";
                var idPr = (this).id;
                localStorage.setItem("main", idPr);
                localStorage.setItem("sub", idItm);
                location.href = "sj2.html";
            });
        });

    </script>


</head>
<body>
    <div class="header">
        <div class="headerWrapper">
            <div class="headerCont">
                <div class="langIcon" id="lang" onclick="pickLanguage()"></div>
                <div class="titleCont"><div class="mainTitle" id="hdTitle">מסע בין כוכבים</div></div>
                <div class="homeIcon"></div>
            </div>
        </div>
        <div class="borderBtm"></div>
    </div>
    <div class="pageCont" id="sj1">
        <div class="pageWrapper">
            <div class="category">
                <span class="greenTitle" id="catgTitle">קטגוריות</span>
                <span class="split invisible" id="split1">&ensp;/&ensp;</span>
                <span class="greenTitle" id="catgSub1"></span>
            </div>

            <div class="pageSubCont">
                <div class="pageSubWrapper">
                    <div class="catgList">
                        <ul>
                            <li id="c1" class="catgItem">

                            </li>
                            <li id="c2" class="catgItem singleCat">


                            </li>
                            <li id="c3" class="catgItem">


                            </li>
                            <li id="c4" class="catgItem singleCat">


                            </li>
                            <li id="c5" class="catgItem singleCat">


                            </li>
                            <li id="c6" class="catgItem">


                            </li>
                            <li id="c7" class="catgItem singleCat">


                            </li>
                            <li id="c8" class="catgItem singleCat">


                            </li>
                            <li id="c9" class="catgItem singleCat">


                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </div>



</body>
</html>